# 이벤트 뱅크 버전 관리 정책

## 개요

이 문서는 치킨집 경영 시뮬레이션 게임의 이벤트 뱅크에 대한 버전 관리 정책을 정의합니다. 이벤트 뱅크는 게임의 핵심 콘텐츠로, 체계적인 버전 관리를 통해 일관성과 품질을 유지하는 것이 중요합니다.

## 버전 체계

이벤트 뱅크는 다음과 같은 버전 체계를 따릅니다:

```
vX.Y.Z
```

- **X (메이저)**: 호환성이 깨지는 변경 또는 대규모 콘텐츠 추가 (예: 새로운 이벤트 카테고리 추가)
- **Y (마이너)**: 기존 구조를 유지하면서 기능 추가 (예: 새로운 이벤트 추가)
- **Z (패치)**: 버그 수정 및 밸런스 조정

## 버전 관리 프로세스

### 1. 브랜치 전략

- **main**: 안정적인 릴리스 버전
- **develop**: 개발 중인 다음 버전
- **feature/event-{카테고리}-{설명}**: 새로운 이벤트 추가
- **fix/event-{ID}**: 기존 이벤트 수정
- **balance/event-{카테고리}**: 밸런스 조정

### 2. 커밋 메시지 규칙

```
{타입}({범위}): {제목}

{본문}

{푸터}
```

- **타입**: add, update, fix, balance, remove
- **범위**: 이벤트 ID 또는 카테고리
- **제목**: 변경 내용 요약 (50자 이내)
- **본문**: 상세 설명 (선택 사항)
- **푸터**: 관련 이슈 또는 PR 참조 (선택 사항)

예시:
```
add(daily_routine): 배달 오토바이 고장 이벤트 추가

- 확률 기반 랜덤 이벤트
- 돈과 평판에 부정적 영향
- 수리 또는 새 구매 선택지 제공

Closes #123
```

### 3. 릴리스 프로세스

1. **개발 단계**:
   - 새 이벤트는 feature 브랜치에서 개발
   - 자동화된 검증 및 밸런스 테스트 통과 필요
   - 코드 리뷰 후 develop 브랜치로 병합

2. **릴리스 준비**:
   - develop 브랜치에서 release 브랜치 생성
   - 최종 검증 및 밸런스 조정
   - 릴리스 노트 작성

3. **릴리스**:
   - release 브랜치를 main으로 병합
   - 태그 생성 (vX.Y.Z)
   - 릴리스 노트 발행

4. **핫픽스**:
   - 긴급 수정은 main에서 직접 hotfix 브랜치 생성
   - 수정 후 main과 develop에 모두 병합

## 백업 정책

1. **정기 백업**:
   - 매일 자동 백업 (증분)
   - 주간 전체 백업
   - 월간 아카이브 백업

2. **백업 위치**:
   - 기본: `backups/events_{timestamp}/`
   - 원격: GitLab 저장소 및 클라우드 스토리지

3. **복원 절차**:
   - `event_bank_manager.py --restore {백업경로}` 명령으로 복원
   - 복원 후 자동 검증 실행

## 이벤트 ID 관리

1. **ID 형식**: `{카테고리}_{일련번호}`
   - 예: `daily_routine_001`, `crisis_events_042`

2. **ID 할당 규칙**:
   - 각 카테고리별로 001부터 순차적으로 할당
   - 삭제된 ID는 재사용하지 않음
   - ID는 한번 할당되면 변경 불가

3. **ID 충돌 방지**:
   - 자동 생성 시 기존 ID 확인
   - 병합 시 충돌 검사

## 품질 관리

1. **자동화된 검증**:
   - 모든 커밋은 CI/CD 파이프라인에서 검증
   - 스키마 검증, 밸런스 테스트 필수 통과

2. **품질 메트릭 추적**:
   - 다양성 점수, 트레이드오프 명확성 등 추적
   - 릴리스마다 품질 리포트 생성

3. **리뷰 프로세스**:
   - 모든 새 이벤트는 최소 1명의 리뷰어 필요
   - 대규모 변경은 2명 이상의 리뷰어 필요

## 마이그레이션 정책

1. **스키마 변경 시**:
   - 하위 호환성 유지 또는 마이그레이션 스크립트 제공
   - 변경 사항 문서화

2. **마이그레이션 스크립트**:
   - `dev_tools/migrations/` 디렉토리에 저장
   - 버전 간 자동 변환 지원

## 문서화 요구사항

1. **릴리스 노트**:
   - 모든 변경 사항 기록
   - 새 이벤트 목록 및 설명
   - 밸런스 변경 사항 상세 기록

2. **메타데이터**:
   - 각 이벤트 파일에 작성자, 날짜, 버전 정보 포함
   - 변경 이력 주석으로 기록

## 참고 사항

- 이 정책은 프로젝트의 성장에 따라 조정될 수 있습니다.
- 정책 변경은 팀 합의를 통해 이루어져야 합니다.
- 모든 변경 사항은 문서화되어야 합니다.
