# 이벤트 시스템

## 개요

이벤트 시스템은 Chicken-RNG의 핵심 게임 메커니즘을 구현하는 시스템입니다. 이 시스템은 다음과 같은 주요 컴포넌트로 구성됩니다:

- 이벤트 생성 및 관리
- 이벤트 검증
- 이벤트 뱅크 관리
- 연쇄 효과 처리

## 이벤트 타입

### 1. RANDOM
- 무작위로 발생하는 일상적인 이벤트
- 발생 확률과 쿨다운 시간 설정 가능

### 2. THRESHOLD
- 특정 조건이 충족될 때 발생하는 이벤트
- 지표값이 임계치를 넘을 때 트리거

### 3. SCHEDULED
- 정해진 시점에 발생하는 이벤트
- 게임 내 시간/턴 기준으로 스케줄링

### 4. CASCADE
- 다른 이벤트의 결과로 연쇄적으로 발생
- DAG(Directed Acyclic Graph) 구조로 관리

## 이벤트 구조

```json
{
  "id": "string",
  "category": "string",
  "type": "RANDOM | THRESHOLD | SCHEDULED | CASCADE",
  "name_ko": "string",
  "name_en": "string",
  "text_ko": "string",
  "text_en": "string",
  "effects": [
    {
      "metric": "string",
      "formula": "string"
    }
  ],
  "trigger": {
    "metric": "string",
    "condition": "string",
    "value": "number"
  }
}
```

## 검증 시스템

### 구조적 검증
- JSON 스키마 검증
- 필수 필드 존재 여부
- 데이터 타입 검증

### 의미적 검증
- 트레이드오프 존재 여부
- 문화적 맥락 적절성
- 난이도 밸런스

### 기술적 검증
- formula 구문 검증
- 연쇄 효과 순환 참조 검사
- 이벤트 ID 유일성

## 이벤트 뱅크 관리

### 저장 구조
- JSON/TOML 파일 기반 저장
- 카테고리별 디렉토리 구조
- 버전 관리 시스템 통합

### 관리 기능
- 대량 이벤트 로드/저장
- 자동 검증 및 보고
- 백업 및 복원

### 성능 최적화
- 제너레이터 패턴 사용
- 메모리 효율적 처리
- 점진적 로딩

## 연쇄 효과 시스템

### DAG 구조
- 이벤트 간 의존성 표현
- 순환 참조 방지
- 최대 연쇄 깊이 제한

### 효과 처리
- 누적 효과 계산
- 병렬 효과 처리
- 취소 및 롤백 지원

### 불확실성 관리
- 효과 크기 변동
- 발생 확률 조정
- 연쇄 확률 제어

## 개발 가이드라인

### 이벤트 작성
- 명확한 인과관계 정의
- 적절한 트레이드오프 설계
- 문화적 맥락 고려

### 밸런싱
- 효과 크기 조정
- 발생 빈도 조절
- 연쇄 효과 제한

### 품질 관리
- 자동화된 검증
- 시뮬레이션 기반 테스트
- 사용자 피드백 반영

## 확장성

### 새로운 이벤트 타입
- 인터페이스 기반 설계
- 플러그인 시스템 지원
- 커스텀 트리거 지원

### 외부 시스템 연동
- 메트릭 시스템 통합
- 스토리텔러 연동
- UI 시스템 연계

## 운영 관리

### 모니터링
- 이벤트 발생 통계
- 성능 메트릭 추적
- 오류 로깅

### 유지보수
- 정기적인 밸런스 조정
- 버그 수정 및 패치
- 콘텐츠 업데이트 